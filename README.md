
---

# Документация проекта: Моделирование гравитации и орбит

Этот проект представляет собой симулятор гравитационного взаимодействия небесных тел с симуляцией орбит. Проект написан на Python с использованием библиотеки Pygame для визуализации и NumPy для математических вычислений.

---

## Структура проекта

### 1. Основные модули

#### `celestial_body.py`
- **Описание**: Базовый класс для всех небесных тел.
- **Атрибуты**:
  - `name`: Название тела.
  - `type`: Тип тела (например, "planet", "star").
  - `mass`: Масса тела.
  - `position`: Положение тела в пространстве (NumPy array).
  - `velocity`: Скорость тела (NumPy array).
  - `color`: Цвет тела для отрисовки.
  - `radius`: Радиус тела.
  - `trajectory`: Список для хранения траектории движения.
- **Методы**:
  - `update_position(new_position)`: Обновляет положение тела и добавляет его в траекторию.
  - `draw(screen, scale, offset, font)`: Отрисовывает тело на экране.

#### `planet.py`
- **Описание**: Класс для планет, наследуется от `CelestialBody`.
- **Дополнительные атрибуты**:
  - `atmosphere`: Описание атмосферы планеты.
  - `surface`: Описание поверхности планеты.
- **Методы**:
  - `to_dict()`: Возвращает словарь с данными планеты.

#### `moon.py`
- **Описание**: Класс для спутников, наследуется от `CelestialBody`.
- **Дополнительные атрибуты**:
  - `parent_planet`: Родительская планета спутника.
- **Методы**:
  - `to_dict()`: Возвращает словарь с данными спутника.

#### `star.py`
- **Описание**: Класс для звёзд, наследуется от `CelestialBody`.
- **Дополнительные атрибуты**:
  - `temperature`: Температура звезды.
- **Методы**:
  - `to_dict()`: Возвращает словарь с данными звезды.

#### `spacecraft.py`
- **Описание**: Класс для космических аппаратов, наследуется от `CelestialBody`.
- **Дополнительные атрибуты**:
  - `mission`: Описание миссии аппарата.
- **Методы**:
  - `to_dict()`: Возвращает словарь с данными аппарата.

#### `asteroid.py`
- **Описание**: Класс для астероидов, наследуется от `CelestialBody`.
- **Дополнительные атрибуты**:
  - `composition`: Состав астероида.
- **Методы**:
  - `to_dict()`: Возвращает словарь с данными астероида.

#### `comet.py`
- **Описание**: Класс для комет, наследуется от `CelestialBody`.
- **Дополнительные атрибуты**:
  - `tail_length`: Длина хвоста кометы.
- **Методы**:
  - `to_dict()`: Возвращает словарь с данными кометы.

---

### 2. Операции и утилиты

#### `data_collection.py`
- **Описание**: Сбор данных о небесных телах.
- **Функции**:
  - `collect_data(body)`: Выводит информацию о теле (масса, положение, скорость и т.д.).

#### `atmosphere_study.py`
- **Описание**: Изучение атмосферы планет.
- **Функции**:
  - `study_atmosphere(planet)`: Выводит информацию об атмосфере планеты.

#### `surface_study.py`
- **Описание**: Изучение поверхности планет.
- **Функции**:
  - `study_surface(planet)`: Выводит информацию о поверхности планеты.

#### `spacecraft_launch.py`
- **Описание**: Запуск космических аппаратов.
- **Функции**:
  - `launch_spacecraft(bodies, name, mass, position, velocity, mission)`: Добавляет новый космический аппарат в список тел.

#### `orbit_simulation.py`
- **Описание**: Симуляция орбит небесных тел.
- **Функции**:
  - `simulate_orbits(bodies, dt, time_scale)`: Обновляет положение и скорость тел с использованием метода Рунге-Кутта 4-го порядка.

#### `physics.py`
- **Описание**: Физические вычисления для гравитационного взаимодействия.
- **Функции**:
  - `compute_acceleration(bodies, index)`: Вычисляет ускорение для конкретного тела.
  - `rk4_step(bodies, dt)`: Выполняет один шаг симуляции с использованием метода Рунге-Кутта.

#### `json_load.py`
- **Описание**: Загрузка и сохранение данных в формате JSON.
- **Функции**:
  - `load_bodies_from_json(file_path)`: Загружает данные о телах из JSON-файла.
  - `save_bodies_to_json(file_path, bodies)`: Сохраняет данные о телах в JSON-файл.

---

### 3. Взаимодействие с пользователем

#### `scene_interaction.py`
- **Описание**: Обработка событий мыши и клавиатуры, а также меню для взаимодействия с пользователем.
- **Функции**:
  - `handle_mouse_events(event, scale, offset, tracked_body, dragging, last_mouse_pos)`: Обрабатывает события мыши (клики, прокрутка).
  - `handle_keyboard_events(event, time_scale, tracked_body, offset, pause)`: Обрабатывает события клавиатуры (пауза, изменение масштаба времени).
  - `menu(bodies, offset, screen, scale, tracked_body)`: Отображает меню для выбора операций (изучение атмосферы, запуск аппарата и т.д.).

---

## Пример использования

### Запуск симуляции
1. Загрузите данные о телах из JSON-файла:
   ```python
   bodies = load_bodies_from_json("solar_system.json")
   ```
2. Запустите симуляцию:
   ```python
   simulate_orbits(bodies, dt=3600, time_scale=1)
   ```
3. Используйте меню для взаимодействия:
   ```python
   menu(bodies, offset, screen, scale, tracked_body)
   ```

### Пример JSON-файла
```json
[
    {
        "name": "Sun",
        "type": "star",
        "mass": 1.989e30,
        "position": [0, 0],
        "velocity": [0, 0],
        "color": [255, 255, 0],
        "radius": 6.957e8,
        "temperature": 5778
    },
    {
        "name": "Earth",
        "type": "planet",
        "mass": 5.972e24,
        "position": [149.6e9, 0],
        "velocity": [0, 29.78e3],
        "color": [0, 0, 255],
        "radius": 6.371e6,
        "atmosphere": "Nitrogen-Oxygen",
        "surface": "Rocky"
    }
]
```

---

## Зависимости
- **Python 3.7+**
- **Библиотеки**:
  - `pygame` (для визуализации)
  - `numpy` (для математических вычислений)
  - `json` (для работы с JSON-файлами)

Установите зависимости с помощью:
```bash
pip install pygame numpy
```

---

## Тестирование
Для запуска тестов используйте:
```bash
pytest tests/ --cov=entities --cov=operations --cov=utils --cov-report=term-missing
```

---
